<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mini Clash Royale</title>
<style>
  body {
    margin: 0; padding: 0;
    display: flex; flex-direction: column;
    height: 100vh;
    background: #d0f0ff;
    font-family: Arial, sans-serif;
  }
  #battlefield {
    flex: 1;
    position: relative;
    background: #77aa55;
    border-top: 3px solid #654321;
    border-bottom: 3px solid #654321;
    overflow: hidden;
  }
  /* Draw bridges as brown rectangles on left/right */
  .bridge {
    position: absolute;
    top: 40%;
    width: 80px;
    height: 20px;
    background: sienna;
    border-radius: 4px;
  }
  #bridge-left {
    left: 0;
  }
  #bridge-right {
    right: 0;
  }

  #cards {
    height: 120px;
    background: #eee;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    border-top: 2px solid #ccc;
  }
  .card {
    width: 80px;
    height: 100px;
    background: white;
    border: 2px solid #888;
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
    user-select: none;
    transition: border-color 0.3s;
  }
  .card.selected {
    border-color: #0077ff;
    box-shadow: 0 0 12px #0077ff;
  }
  .troop {
    width: 30px;
    height: 30px;
    margin-top: 8px;
    border-radius: 50%;
  }
  .troop.archer {
    background: #ffcc33;
  }
  .troop.knight {
    background: #555555;
  }
  .troop.giant {
    background: #aa4444;
  }
  .troop.skeleton {
    background: #dddddd;
  }
  .troop.mage {
    background: #8844cc;
  }

</style>
</head>
<body>

<div id="battlefield">
  <div id="bridge-left" class="bridge"></div>
  <div id="bridge-right" class="bridge"></div>
</div>

<div id="cards">
  <div class="card" data-type="archer">
    Archer
    <div class="troop archer"></div>
  </div>
  <div class="card" data-type="knight">
    Knight
    <div class="troop knight"></div>
  </div>
  <div class="card" data-type="giant">
    Giant
    <div class="troop giant"></div>
  </div>
  <div class="card" data-type="skeleton">
    Skeleton
    <div class="troop skeleton"></div>
  </div>
  <div class="card" data-type="mage">
    Mage
    <div class="troop mage"></div>
  </div>
</div>

<script>
  const battlefield = document.getElementById('battlefield');
  const cards = document.querySelectorAll('.card');

  let selectedType = null;
  let troops = [];

  // Troop properties (speed in px per frame)
  const troopData = {
    archer: { speed: 1.5, colorClass: 'archer' },
    knight: { speed: 1, colorClass: 'knight' },
    giant: { speed: 0.5, colorClass: 'giant' },
    skeleton: { speed: 2, colorClass: 'skeleton' },
    mage: { speed: 1.2, colorClass: 'mage' },
  };

  // Select a troop card
  cards.forEach(card => {
    card.addEventListener('click', () => {
      cards.forEach(c => c.classList.remove('selected'));
      if (selectedType === card.dataset.type) {
        selectedType = null; // deselect if clicked again
      } else {
        selectedType = card.dataset.type;
        card.classList.add('selected');
      }
    });
  });

  // Deploy troop on battlefield click
  battlefield.addEventListener('click', e => {
    if (!selectedType) return;

    const rect = battlefield.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    // Create troop element
    const troop = document.createElement('div');
    troop.classList.add('troop', troopData[selectedType].colorClass);
    troop.style.position = 'absolute';
    troop.style.left = `${x - 15}px`; // center circle
    troop.style.top = `${y - 15}px`;

    battlefield.appendChild(troop);

    // Determine direction: if placed on left half, move right, else move left
    const direction = x < rect.width / 2 ? 1 : -1;

    troops.push({
      el: troop,
      x: x - 15,
      y: y - 15,
      speed: troopData[selectedType].speed * direction,
    });

    // Optional: deselect card after deploy
    cards.forEach(c => c.classList.remove('selected'));
    selectedType = null;
  });

  // Game loop to move troops
  function gameLoop() {
    const rect = battlefield.getBoundingClientRect();

    troops.forEach((troop, index) => {
      troop.x += troop.speed;
      troop.el.style.left = troop.x + 'px';

      // Remove troop if out of battlefield
      if (troop.x < -30 || troop.x > rect.width) {
        troop.el.remove();
        troops.splice(index, 1);
      }
    });

    requestAnimationFrame(gameLoop);
  }
  gameLoop();
</script>

</body>
</html>
