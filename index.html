<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clash Royale 3D Mega Baseline</title>
  <style>
    html,body{margin:0;padding:0;height:100%;overflow:hidden;background:#0b1220;font-family:sans-serif;color:#fff}
    canvas{display:block;position:absolute;top:0;left:0;z-index:0;}
    .ui{position:absolute;top:10px;left:10px;z-index:10;background:rgba(0,0,0,0.5);padding:10px;border-radius:8px}
    button{margin:2px;padding:6px 12px;border:none;border-radius:4px;background:#1e90ff;color:#fff;cursor:pointer}
  </style>
</head>
<body>
  <div class="ui">
    <button id="spawnTroop">Spawn Troop</button>
    <button id="spawnEnemy">Spawn Enemy</button>
    <button id="reset">Reset</button>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
  <script>
    // Scene setup
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x87CEEB); // Sky blue

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 50, 80);
    camera.lookAt(0,0,0);

    const renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.shadowMap.enabled = true;
    document.body.appendChild(renderer.domElement);

    // Lights
    const ambient = new THREE.AmbientLight(0xffffff,0.6);
    scene.add(ambient);

    const dirLight = new THREE.DirectionalLight(0xffffff,0.8);
    dirLight.position.set(50,100,50);
    dirLight.castShadow = true;
    scene.add(dirLight);

    // Ground
    const groundGeo = new THREE.PlaneGeometry(100,100);
    const groundMat = new THREE.MeshPhongMaterial({color:0x228B22});
    const ground = new THREE.Mesh(groundGeo,groundMat);
    ground.rotation.x = -Math.PI/2;
    ground.receiveShadow = true;
    scene.add(ground);

    // River
    const riverGeo = new THREE.PlaneGeometry(100,20);
    const riverMat = new THREE.MeshPhongMaterial({color:0x1E90FF});
    const river = new THREE.Mesh(riverGeo,riverMat);
    river.rotation.x = -Math.PI/2;
    river.position.z = 0;
    scene.add(river);

    // Bridges
    const bridgeGeo = new THREE.BoxGeometry(20,1,5);
    const bridgeMat = new THREE.MeshPhongMaterial({color:0x8B4513});
    const bridgeLeft = new THREE.Mesh(bridgeGeo,bridgeMat);
    bridgeLeft.position.set(-25,0.5,0);
    const bridgeRight = bridgeLeft.clone();
    bridgeRight.position.set(25,0.5,0);
    scene.add(bridgeLeft,bridgeRight);

    // Towers (placeholders)
    const towerGeo = new THREE.CylinderGeometry(3,3,12,32);
    const towerMat = new THREE.MeshPhongMaterial({color:0xaaaaaa});
    const tower1 = new THREE.Mesh(towerGeo,towerMat);
    tower1.position.set(-30,6,-30);
    const tower2 = tower1.clone(); tower2.position.set(30,6,-30);
    const tower3 = tower1.clone(); tower3.position.set(0,6,-40);
    const tower4 = tower1.clone(); tower4.position.set(-30,6,30);
    const tower5 = tower1.clone(); tower5.position.set(30,6,30);
    const tower6 = tower1.clone(); tower6.position.set(0,6,40);
    scene.add(tower1,tower2,tower3,tower4,tower5,tower6);

    // Resize handling
    window.addEventListener('resize',()=>{
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth,window.innerHeight);
    });

    // Animation loop
    function animate(){
      requestAnimationFrame(animate);
      renderer.render(scene,camera);
    }
    animate();
  </script>
</body>
</html>
